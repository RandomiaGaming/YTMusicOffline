<!DOCTYPE html>
<html>

<head>
    <title>EzMusic</title>
</head>

<body>
    <script src="SongsLoader.js"></script>
    <script>
        function PlayRandomSong() {
            const index = Math.floor(Math.random() * window.Songs.length);
            Play(window.Songs[index]);
        }
        function SongByVideoID(videoID) {
            for (let i = 0; i < window.Songs.length; i++) {
                if (window.Songs[i].VideoID == videoID) {
                    return Songs[i];
                }
            }
            return null;
        }
        function Play(song) {
            window.NowPlaying = song;

            const player = document.querySelector("#player");
            player.pause();
            player.src = `RawSongs/${song.VideoID}.webm`;
            player.currentTime = 0;
            player.play();

            const status = document.querySelector("#status");
            const releaseDate = new Date(song.ReleaseDate);
            const releaseDateFormatted = releaseDate.toLocaleDateString("en-US", { month: "short", day: "numeric", year: "numeric" });
            let featuringStatement = "";
            for (let i = 0; i < song.FeaturedArtistNames.length; i++) {
                if (i == 0) {
                    featuringStatement += " featuring ";
                } else {
                    featuringStatement += ", ";
                }
                featuringStatement += song.FeaturedArtistNames[i];
            }
            status.innerHTML = `Now playing ${song.SongName} by ${song.ArtistName} from ${song.AlbumName} released on ${releaseDateFormatted}${featuringStatement}.`;

            const thumbnail = document.querySelector("#thumbnail");
            thumbnail.src = `RawThumbnails/${song.VideoID}.png`;

            const woy = document.querySelector("#woy");
            woy.href = `https://www.youtube.com/watch?v=${song.VideoID}`;
        }
    </script>
    <audio id="player" style="width: 90vw;" controls loop></audio>
    <br />
    <button onclick="PlayRandomSong()">Play Random Song!</button>
    <br />
    <p id="status"></p>
    <br />
    <image style="width: 100px; height: 100px;" id="thumbnail"></image>
    <br />
    <p><a id="woy" href="" target="_blank">Watch on YouTube...</a></p>
</body>

</html>